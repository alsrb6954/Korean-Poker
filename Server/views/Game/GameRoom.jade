extends ../layout

block content
  .gamefield
    .row
      h5#_id #{room._id+1}
      include ../includes/chat
    .row(id='userWindow')
      each user in room.connUsers
        .col-xs-6
          h3(name='username')= user.userName
          span(name='win') 승: #{user.win}
          span(name='lose') / 패: #{user.lose}
          p
            if(user.isReady == true)
              span(name='state') 준비 완료
            else
              span(name='state') 대기 중     
          img.profile.img-circle(src="https://img1.daumcdn.net/thumb/R720x0.q80/?scode=mtistory&fname=http%3A%2F%2Fcfile27.uf.tistory.com%2Fimage%2F2466D94653EC5DBD29E64E")
    .draw
      //- img.cards(src="/images/Card-S.png")
      //- img.cards(src="/images/Card-S.png")
      //- img.cards(src="/images/Card-S.png")
      //- img.cards(src="/images/Card-S.png")
      //- img.cards(src="/images/Card-S.png")
      //- img.cards(src="/images/Card-S.png")
      //- img.cards(src="/images/Card-S.png")
      //- img.cards(src="/images/Card-S.png")
      //- img.cards(src="/images/Card-S.png")
      img.moneypanel(src="/images/Moneyarea.png")
      h5#roomMoney='배팅 금액 : '+room.roomMoney+'원'
      h3#roomAllMoney='총 금액 : '+room.roomAllMoney +'원'
    .row
      #buttons
        //img.myprofile(src=currentUser.photoURL)
        h1(id='roomName')= room.roomName
        p#firstButton
          img.myprofile(src="https://img1.daumcdn.net/thumb/R720x0.q80/?scode=mtistory&fname=http%3A%2F%2Fcfile27.uf.tistory.com%2Fimage%2F2466D94653EC5DBD29E64E")
          button.btn(id="ready")
          button.btn(id="exit")
    .row
      .col.xs.4
        img.mycards
        img.mycards
        img.mycards
    .row(id='bettingBar')
      button.col-md-2(id="dadang")
      button.col-md-2(id="call")
      button.col-md-2(id="half")
      button.col-md-2(id="bbing")
      button.col-md-2(id="check")
      button.col-md-2(id="die")
    //- script(type='text/javascript', src='/javascripts/drawcard.js')
    //- script(type='text/javascript', src='/javascripts/selectedcard.js')

    script(type='text/javascript', src='/javascripts/flipcard.js').
    script(src='/javascripts/gameConnetion.js').    
    script#rowTemplate1(type='text/template').
      <div class = "col-xs-6">
        <h3 name='username' ></h3>
        <span name='win'></span>
        <span name='lose'></span>
        <p>
            <span name='state'></span>
        </p> 
        <img class="profile" class="img-circle" src="https://img1.daumcdn.net/thumb/R720x0.q80/?scode=mtistory&fname=http%3A%2F%2Fcfile27.uf.tistory.com%2Fimage%2F2466D94653EC5DBD29E64E"/>
      </div>

    script#rowTemplate2(type='text/template').
      <div class = "draw">
         <img class="cards" name='card1' src="/images/Card-S.png">
         <img class="cards" name='card2' src="/images/Card-S.png">
       </div> 
    script#rowTemplate3(type='text/template').
      <div class = "col-xs-6">
        <img class="profile" class="img-circle" src="https://img1.daumcdn.net/thumb/R720x0.q80/?scode=mtistory&fname=http%3A%2F%2Fcfile27.uf.tistory.com%2Fimage%2F2466D94653EC5DBD29E64E"/>
      </div> 
  style.
    #bettingBar{
      top:100%;
      position:sticky;
    }
    #dadang{
      background: url('/images/button/dadang.png');
      background-repeat: no-repeat;
      background-position:center center;
      width:10%;
      height:25%;
    }
    #call{
      background: url('/images/button/call.png');
      background-repeat: no-repeat;
      background-position:center center;
      width:10%;
      height:25%;
    }
    
    #half{
      background: url('/images/button/half.png');
      background-repeat: no-repeat;
      background-position:center center;
      width:10%;
      height:25%;
    }
    
    #bbing{
      background: url('/images/button/bbing.png');
      background-repeat: no-repeat;
      background-position:center center;
      width:10%;
      height:25%;
    }
    #check{
      background: url('/images/button/check.png');
      background-repeat: no-repeat;
      background-position:center center;
      width:10%;
      height:25%;
    }
    #die{
      background: url('/images/button/die.png');
      background-repeat: no-repeat;
      background-position:center center;
      width:10%;
      height:25%;
    }
    .row{
      margin-right: 0px;
      margin-left: 0px;
      color: white;
    }
     #roomMoney{
      left : 34%;
      bottom : 30%;
      position:absolute;
      color: white;
    }
    #roomAllMoney{
      left : 70%;
      bottom : 42%;
      position:absolute;
      color: white;
    }
    #ready{
      position:absolute;
      left:60%;
      top:9%;
      width:30%;
      height:30%;
      background: url('/images/button/ready.png');
      background-repeat: no-repeat;
      background-position:center center;
    }
    #exit{
      position:absolute;
      left:60%;
      top:40%;
      width:30%;
      height:30%;
      background: url('/images/button/exit.png');
      background-repeat: no-repeat;
      background-position:center center;
    }
    #buttons h1{
      position: absolute;
      top : 60%;
      left: 3%;
      color: white;
    }
    .myprofile{
      position:absolute;
      left:3%;
      top:10%;
      width:30%;
      height:60%;
    }
    .navbar{
      display: none;
    }
    #firstButton {
      position: absolute;
      width: 25%;
      height: 25%;
      bottom : 2%;
      left: 1%;
      background: url('/images/Butttonarea.png');
      background-repeat: no-repeat;
      background-size:auto;
    }
    .row .container {
      position: absolute;
      bottom : 10%;
      right: 8%;
      width: 200px;
      color: black;
    }
    .col-xs-6:nth-child(1) {
      background: url('/images/Profilearea.png');
      background-position:center center;
      background-repeat: no-repeat;
      background-size:cover;
      position: absolute;
      top: 1%;
      left: 68%;
      padding-top:0px;
      padding-left:0px;
      padding-right:0px;
      width: 20%;
      height: 30%;
    }
    .col-xs-6:nth-child(1) .profile {
      position: absolute;
      top: 10% ;
      left: 110%;
      width: 50%;
      height: 50%;
    }
    .col-xs-6:nth-child(1) span{
      position: relative;
      left: 2%;
    }
    .col-xs-6:nth-child(1) h3{
      position: relative;
      left: 2%;
      width:95%;
    }
    .col-xs-6:nth-child(2) {
      background: url('/images/Profilearea.png');
      background-repeat: no-repeat;
      background-position:center center;
      background-size:contain;
      left: 68%;
      top: 30%;
      position: absolute;
      padding-left:0px;
      padding-right:0px;
      width: 20%;
      height: 200px;
    }
    .col-xs-6:nth-child(2) .profile {
      position: absolute;
      top: 10% ;
      left: 110%;
      width: 50%;
      height: 50%;
    }
    .col-xs-6:nth-child(2) span{
      position: relative;
      left: 2%;
    }
    .col-xs-6:nth-child(2) h3{
      position: relative;
      left: 2%;
      width:95%;
    }
    .col-xs-6:nth-child(3) {
      background: url('/images/Profilearea.png');
      background-repeat: no-repeat;
      background-position:center center;
      background-size:contain;
      position: absolute;
      top: 30%;
      right: 68%;
      padding-left:0px;
      padding-right:0px;
      width: 20%;
      height: 200px;
    }
    .col-xs-6:nth-child(3) .profile {
      position: absolute;
      top: 10% ;
      right: 110%;
      width: 50%;
      height: 50%;
    }
    .col-xs-6:nth-child(3) span{
      position: relative;
      left: 2%;
    }
    .col-xs-6:nth-child(3) h3{
      position: relative;
      left: 2%;
      width:95%;
    }
    .col-xs-6:nth-child(4) {
      background: url('/images/Profilearea.png');
      background-repeat: no-repeat;
      background-position:center center;
      background-size:contain;
      top: 1%;
      position: absolute;
      right: 68%;
      padding-left:0px;
      padding-right:0px;
      width: 20%;
      height: 200px;
    }
    .col-xs-6:nth-child(4) .profile {
      position: absolute;
      top: 10% ;
      right: 110%;
      width: 50%;
      height: 50%;
    }
    .col-xs-6:nth-child(4) span{
      position: relative;
      left: 2%;
    }
    .col-xs-6:nth-child(4) h3{
      position: relative;
      left: 2%;
      width:95%;
    }
    
    .gamefield {
      width: 100%;
      height: 100%;
      background: url('/images/BG.png');
      background-repeat: no-repeat;
      position: absolute;
    }
    
    .cardarea{
      position: absolute;
      width:25%;
      height:25%;
    }
    
    .image-selected{
      position: absolute;
      left : 37%;
      top : 65%;
      width: 8%;
      display: none;
    }
    .draw {
      position: absolute;
      height: 50%;
      width: 50%;
      top: 0%;
      left: 20%;
    }
    .cards {
      position: absolute;
      left : 50%;
      bottom : 40%;
      height: 35%;
      width: 11%;
    }
    .moneypanel {
      position: absolute;
      height: 100%;
      width: 60%;
      left : 30.5%;
      bottom : -10%;
    }
    .mycards {
      position: absolute;
      left : 37%;
      top : 70%;
      height: 25%;
      width: 8%;
      display:none;
    }
    @media all and (min-width: 360px) and (max-width: 640px){
      .gamefield {
        -ms-transform: rotate(-90deg); /* IE 9 */
        -webkit-transform: rotate(-90deg); /* Chrome, Safari, Opera */
        transform: rotate(-90deg);
        width: 640px;
        height: 360px;
        top: 140px;
        left: -140px;
        background: url('/images/BG.png');
        background-repeat: no-repeat;
        position: absolute;
        background-position:center center;
        background-size:contain;
      }
      #buttons {
      position: absolute;
      width: 25%;
      height: 25%;
      bottom : 5%;
      left: 1%;
      background: url('/images/Butttonarea.png');
      background-repeat: no-repeat;
      background-size:auto;
      }
      #roomMoney{
      left : 37%;
      bottom : 40%;
      position:absolute;
      color: white;
      font-size: 1em;
      }
      #roomAllMoney{
        left : 70%;
        bottom : 55%;
        position:absolute;
        color: white;
        font-size: 1em;
      }
      .image-selected{
        position: absolute;
        //- left : 37%;
        //- top : 70%;
        //- height: 30%;
        //- width: 10%;
        left : 37%;
        top : 65%;
        width: 8%;
        display: none;
      }
      .mycards {
        position: absolute;
        left : 37%;
        top : 70%;
        height: 25%;
        width: 8%;
        display: none;
      }
      .col-xs-6 span{
        font-size :0.1em;
      }
      .caption{
        width: 70px;
      }
      .thumbnail{
        padding-left: 25px;
        margin-bottom: 0px;
      }
      .col-xs-6:nth-child(1) {
        position: absolute;
        top: 1%;
        left: 80%;
        width: 100px;
        font-size: 1em;
      }
      .col-xs-6:nth-child(2) {
        left: 80%;
        top: 30%;
        position: absolute;
        width: 100px;
      }
      .col-xs-6:nth-child(3) {
        position: absolute;
        top: 30%;
        right: 80%;
        width: 100px;
      }
      .col-xs-6:nth-child(4) {
        top: 1%;
        position: absolute;
        right: 80%;
        width: 100px;
      }
      .row .container {
        position: absolute;
        bottom : 2.5%;
        left: 84%;
        width: 100px;
        font-size: 0.2em;
      }
      .profile {
        height: 50%;
        width: 50%;
      }
    }
    
